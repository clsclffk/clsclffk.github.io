---
title: 공공데이터 API에서 SOAP와 REST의 차이, 왜 REST는 되고 SOAP은 막혔을까?
author: jisu
date: 2025-05-26 22:45:00 +0900
categories: [API]
tags: [SOAP, REST]
pin: false
math: true
mermaid: true
comments: true
---

## 공공데이터 API에서 SOAP와 REST의 차이, 왜 REST는 되고 SOAP은 막혔을까?

데이터 엔지니어링 프로젝트 중 **여행지 추천 서비스**를 만들기 위해 한국관광공사 API를 사용하려 했다.  
`searchKeyword2`, `detailCommon2`, `detailImage2` 같은 REST API들은 잘 호출되는데,  
법정동 코드 조회(`IdongCode2`) API만 호출하면 이런 에러가 나타났다.  

```
<detail>
<l7:policyResult xmlns:l7="http://www.layer7tech.com/ws/policy/fault" status="Service Not Found. The request may have been sent to an invalid URL, or intended for an unsupported operation."/>
</detail>
```

### 🚨 문제 원인 : REST와 SOAP의 혼용

공공데이터 API는 REST API와 SOAP API가 섞여 있다.  
- `searchKeyword2` (키워드 검색), `locationBasedList2` (위치 기반 검색) 같은 최신 API들은 REST 기반으로 동작한다.
- 하지만 `IdongCode2` (법정동 코드 조회) API는 SOAP 방식만 지원한다.

즉, REST 방식(`GET` 요청 + URL 파라미터)으로 호출하려다 실패했던 것이다.

### REST와 SOAP의 차이

공공데이터 API를 사용하다 보면 REST API와 SOAP API라는 두 가지 방식이 섞여 있는 것을 발견하게 된다.

REST API는 URL과 파라미터를 통해 간단히 데이터를 요청하고, JSON 형식의 직관적인 응답을 받을 수 있다. 예를 들어 requests.get()을 사용해 쉽게 호출할 수 있고, 대부분의 최신 API가 이 방식으로 제공된다.

반면 SOAP API는 훨씬 복잡하다. 요청을 보낼 때 단순히 URL 호출만으로는 되지 않고, 반드시 XML 형식의 Envelope 구조를 만들어서 POST 요청으로 보내야 한다. 이 Envelope는 SOAP 요청과 응답의 틀 역할을 하며, 대략 다음과 같은 형태를 가진다:
```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <soapenv:Fault>
      <faultcode>soapenv:Server</faultcode>
      <faultstring>Policy Falsified</faultstring>
      <faultactor>https://apis.data.go.kr/B551011/KorService2/IdongCode2?...</faultactor>
      <detail>
        <l7:policyResult xmlns:l7="http://www.layer7tech.com/ws/policy/fault" status="Service Not Found. The request may have been sent to an invalid URL, or intended for an unsupported operation."/>
      </detail>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope>
```

이처럼 SOAP 요청과 응답은 항상 <Envelope> 태그로 감싸지며, 그 안에 <Body>와 <Fault> 같은 요소들이 포함된다.
Python에서는 이런 XML 구조를 직접 작성하거나, zeep 같은 라이브러리를 통해 생성해야 한다.
반면 REST API는 URL에 파라미터만 추가해 GET 요청으로 데이터를 가져올 수 있고, 응답도 JSON으로 주어지기 때문에 더 직관적이고 사용하기 쉽다.

이러한 이유로 최신 API는 대부분 REST 방식으로 제공되지만, 일부 오래된 시스템에서는 여전히 SOAP 방식을 사용하는 경우가 있다.


### 💡 해결 방법: SOAP API, 정말 필요한가?

프로젝트 목적은 **자연 여행지 추천**. 법정동 코드 조회는 **지역 이름 → 코드 매칭** 정도로만 필요했다.  
이를 위해 굳이 SOAP API를 쓰는 대신:  
- **대체 데이터셋 (CSV)** 를 사용하거나,  
- **REST API의 지역 코드 (`areaCode`)** 만으로 충분히 구현할 수 있다.

따라서 `IdongCode2`는 제외하고, 나머지 REST API들만 사용하기로 했다.

📝 결론
공공 API에서 SOAP API는 남아있는 레거시 시스템이다.
가능하면 REST API만 선택해서 사용하고, SOAP API는 정말 필요한 경우에만 별도 처리하거나, 대체 데이터셋으로 대체하는 것이 유지보수에 유리하다.

이번 경험으로 REST와 SOAP의 차이를 명확히 이해했고, 프로젝트의 API 설계 방향성도 REST 기반으로 깔끔하게 정리할 수 있었다.
